# UI 改进文档（已落地）

## 目标范围
- 覆盖核心聊天流 + 管理与设置（频道管理 / 用户资料 / 服务器管理）

---

## 一、频道管理
### 已落地
- 频道列表顶部改为服务器信息卡片（始终显示）
- 服务器信息卡片下方新增搜索输入框（含“+”样式）
- 搜索结果分区：
  - 已加入（本地匹配）
  - 未加入（远端搜索占位）
- 右键频道菜单新增“频道信息”，点击打开频道信息新窗口
- 频道信息新窗口展示：名称 / 头像 / 简介 + “官方频道”标识（owner=-1）

### TODO
- “未加入频道搜索”接口接入
- 频道管理功能（置顶、设置、清理历史等）逻辑接入

---

## 二、用户资料
### 已落地
- 用户资料改为 Tauri 新窗口
- 同窗口“查看 / 编辑”切换
- 编辑字段覆盖：头像 / 用户名 / 邮箱 / 简介 / 性别 / 生日
- 邮箱修改走验证码流程（通过主窗口事件桥处理）
- 头像上传支持本地预览（上传仍为 TODO）
- 支持查看他人资料（不可编辑）
- 资料页包含退出登录入口（由主窗口执行）

### TODO
- 头像上传完整链路（上传 token + HTTP 上传 + avatar id 回写）

---

## 三、服务器管理
### 已落地
- 服务器列表底部菜单新增“服务器管理”
- 服务器管理弹窗：
  - 新增服务器（socket + ECC）
  - 移除服务器
  - 置顶
  - 通知模式
  - 名称 / 备注
- 服务器信息弹窗：从卡片点击打开

### TODO
- 服务器信息与在线人数的完整数据接入/刷新策略
- 服务器通知设置真实逻辑对接

---

## 四、技术说明
- 新窗口（用户资料 / 频道信息）通过 `open_info_window` 打开
- 新窗口无法直接复用 TCP 连接，使用 Tauri 事件桥（request/response）由主窗口执行 API 调用

---

## 变更入口一览
- 频道列表顶部：服务器信息卡片 + 搜索框
- 频道右键菜单：频道信息
- 服务器列表底部菜单：服务器管理
- 用户头像点击 / “查看资料”：新窗口
